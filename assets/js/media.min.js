let imgData,dataRevieved=!1,currLayout=getLayout();async function fetchImgData(){try{let t=await fetch("/assets/json/imgData.min.json");if(!t.ok)throw Error("failed to fetch and load imgData.json");let e=await t.json();return dataRevieved=!0,imgData=e,e}catch(a){return alert('Failed to load Images. Try reloading this site.\nIf this issue persists, please contact "hello@sebastian-sonne.com" and include the following error Message.\nError Message: '+a),console.log("Error fetching image Data:"+a),await Promise.reject(a)}}function updateLayout(){let t=getLayout();if(currLayout==t)return;currLayout=t;let e=document.getElementById("media-grid"),a=e.childNodes,l=imgData[getCategoryFromUrl()];for(let n=0;n<a.length;n++){let i=a[n],o=getFilenameFromURL(i.src),r=l[o].layout[t];if(Array.from(i.classList).forEach(function(t){(t.startsWith("grid-col-")||t.startsWith("grid-row-")||t.startsWith("display-none"))&&i.classList.remove(t)}),null!=r){let s=r.split(" ");i.classList.add(...s)}}}function getLayout(){let t=window.innerWidth;return t<769?"l1":t<1101?"l2":t<1465?"l3":"l4"}function getFilenameFromURL(t){var e=t.split("/");return e[e.length-1]}function checkCategory(t){return!!["fav","nature","mountain","city","cars","sunset"].includes(t)}function getCategoryFromUrl(){let t=new URLSearchParams(window.location.search);return t.get("category")||"fav"}function disableScroll(){let t=window.scrollY,e=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.paddingRight=`${e}px`,document.body.style.top=`-${t}px`}function enableScroll(){let t=parseInt(document.body.style.top,10);document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.paddingRight="",document.body.style.top="",isNaN(t)||window.scrollTo(0,Math.abs(t))}function setupIntersectionObserver(){let t=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&t.target.classList.add("show")})}),e=document.querySelectorAll(".hidden");e.forEach(e=>t.observe(e))}document.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("media-nav"),e=document.getElementById("media-grid"),a=null;t.addEventListener("click",function(t){if("LI"===t.target.tagName){let e=t.target.dataset.category,l=getCategoryFromUrl();if(e!=l){g(e),function t(e){let a=new URLSearchParams(window.location.search);a.set("category",e);let l=window.location.pathname+"?"+a.toString();window.history.pushState({path:l},"",l)}(e);let n=document.getElementById("media-invalid-category");n.style.display="none";let i=document.querySelector(`[data-category="${e}"]`);a&&(a.style.backgroundColor="",a.classList.remove("media-li-active")),i.style.backgroundColor="var(--primary)",i.classList.add("media-li-active"),a=i,setupIntersectionObserver()}}});let l=document.getElementById("media-nav-arrow-left");l.addEventListener("click",function(){"flex"===lightbox.style.display&&o()});let n=document.getElementById("media-nav-arrow-right");function i(t){let e=getCategoryFromUrl(),a=imgData[e][t],l=document.getElementById("lightbox-img");l.src="",l.src=a.url,c(t)}function o(){let t=getCategoryFromUrl(),e=d(),a=Object.keys(imgData[t]),l=(e-1+a.length)%a.length;i(a[l]),setTimeout(()=>{navigationActive=!0},100)}function r(){let t=getCategoryFromUrl(),e=d(),a=Object.keys(imgData[t]),l=(e+1+a.length)%a.length;i(a[l]),setTimeout(()=>{navigationActive=!0},100)}function s(){let t=getCategoryFromUrl(),e=d(),a=Object.keys(imgData[t]);return a[e]}function d(){let t=document.getElementById("lightbox-img").src,e=t.split("/").pop(),a=getCategoryFromUrl(),l=Object.keys(imgData[a]);return l.indexOf(e)}function c(t){let e=getCategoryFromUrl(),a=imgData[e][t],l=document.getElementById("lighbox-h1"),n=document.getElementById("lightbox-date");l.textContent=a.location,n.textContent=a.date}function g(t){!1==dataRevieved?fetchImgData().then(e=>{y(e,t)}).catch(t=>{console.log("Error: "+t)}):y(imgData,t)}function y(t,a){null==t&&null==imgData&&fetchImgData(),e.innerHTML="";let l=getLayout(),n=t[a];for(let i in n){let o=n[i],r=document.createElement("img"),d=o.layout[l];if(r.src=o.url,r.classList.add("thumbnail"),r.classList.add("hidden"),null!=d){let g=d.split(" ");r.classList.add(...g)}r.setAttribute("alt",o.alt),r.addEventListener("click",function(){document.getElementById("lightbox-img").src=this.src,c(s()),m("flex")}),e.appendChild(r)}setupIntersectionObserver()}function u(e){let l=t.querySelector(`[data-category="${e}"]`),n=document.getElementById("media-invalid-category");checkCategory(e)?(l&&(null!=a&&(a.style.backgroundColor="unset",a.classList.remove("media-li-active")),l.style.backgroundColor="var(--primary)",l.classList.add("media-li-active"),a=l),n.style.display="none",g(e)):(n.style.display="block",g("invalid"))}function m(t){"flex"==t?disableScroll():enableScroll(),document.getElementById("lightbox").style.display=t}n.addEventListener("click",function(){"flex"===lightbox.style.display&&r()}),u(getCategoryFromUrl()),document.addEventListener("keydown",function(t){"Escape"===t.key&&m("none"),"flex"===lightbox.style.display&&("ArrowLeft"===t.key&&o(),"ArrowRight"===t.key&&r())}),window.addEventListener("popstate",function(t){let e=getCategoryFromUrl();e&&(u(e),g(e))});let f=document.getElementById("close");f.addEventListener("click",function(){m("none")})}),window.addEventListener("load",setupIntersectionObserver),window.addEventListener("resize",updateLayout);